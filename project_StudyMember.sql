-- StudyMember 데이터베이스 생성
CREATE DATABASE StudyMember DEFAULT CHARACTER SET UTF8;

-- 사용자 아이디, 사용자 비밀번호 생성 
CREATE  USER StudyManager@localhost IDENTIFIED BY 'study1234';

-- 사용자 StudyManageR에게 모든 권한을 부여
GRANT ALL PRIVILEGES ON StudyMember.* TO StudyManager;

USE StudyMember;
Drop table if exists seat,room, member,door;

-- seat 테이블 생성 (좌석번호, 타입, 이용료, 시작일, 종료일, 결제일)
CREATE TABLE SEAT (                
  S_NUMBER   INT    NOT NULL,
  S_TYPE     VARCHAR(10) ,
  S_CHARGE   INT,
  S_START    DATE,
  S_ENT      DATE,
  S_PAYMENT  DATE,
 PRIMARY KEY(S_NUMBER)
);

-- room 테이블 생성 (룸번호, 스터디룸 최대 인원, 시작 시각, 종료 시각, 이용시간)
CREATE TABLE ROOM (                
  R_NUMBER    INT    NOT NULL,
  R_MAX       INT, 
  RES_START  DATETIME,
  RES_END    DATETIME,
  RES_TIME    INT,
 PRIMARY KEY(R_NUMBER)
);

-- member 테이블 생성 (룸번호, 스터디룸 최대 인원, 시작시각, 종료시각, 이용시간)

CREATE TABLE MEMBER (            
  M_PHONE    INT NOT NULL,
  M_NAME     VARCHAR(10),
  M_ADDRESS  VARCHAR(20),
  M_REST      INT,
  S_NUMBER INT  REFERENCES SEAT(S_NUMBER), 
  R_NUMBER INT  REFERENCES ROOM(R_NUMBER),
 
 PRIMARY KEY(M_PHONE)
);

-- door 테이블 생성 (출입번호, 입실시각, 퇴실시각)
CREATE TABLE DOOR (              
  D_NUMBER    INT   NOT NULL,
  D_ENTER      DATETIME,
  D_LEAVE      DATETIME, 
 PRIMARY KEY(D_NUMBER)
); 

-- Seat 데이터 생성 좌석 25개를 생성 5개는 큰방이고 20개는 작은방이다.

INSERT INTO SEAT VALUES(1,'큰방',160000,'2021-11-04','2021-12-03','2021-11-01');
INSERT INTO SEAT VALUES(2,'큰방',160000,'2021-11-01','2021-11-30','2021-11-01');
INSERT INTO SEAT VALUES(3,'큰방',160000,'2021-11-05','2021-12-04','2021-11-02');
INSERT INTO SEAT VALUES(4,'큰방',160000, NULL,NULL,NULL);
INSERT INTO SEAT VALUES(5,'큰방',160000, NULL,NULL,NULL);
INSERT INTO SEAT VALUES(6,'작은방',150000,'2021-11-11','2021-12-10','2021-11-11');
INSERT INTO SEAT VALUES(7,'작은방',150000,'2021-11-07','2021-12-06','2021-11-03');
INSERT INTO SEAT VALUES(8,'작은방',150000,'2021-11-16','2021-12-15','2021-11-13');
INSERT INTO SEAT VALUES(9,'작은방',150000,'2021-11-20','2021-12-19','2021-11-17');
INSERT INTO SEAT VALUES(10,'작은방',150000,'2021-11-18','2021-12-17','2021-11-18');
INSERT INTO SEAT VALUES(11,'작은방',150000,'2021-11-28','2021-12-27','2021-11-28');
INSERT INTO SEAT VALUES(12,'작은방',150000,'2021-11-28','2021-12-27','2021-11-28');
INSERT INTO SEAT VALUES(13,'작은방',150000,'2021-11-03','2021-12-02','2021-10-31');
INSERT INTO SEAT VALUES(14,'작은방',150000,'2021-11-28','2021-12-27','2021-11-28');
INSERT INTO SEAT VALUES(15,'작은방',150000,'2021-11-14','2021-12-13','2021-11-14');
INSERT INTO SEAT VALUES(16,'작은방',150000,'2021-11-18','2021-12-17','2021-11-15');
INSERT INTO SEAT VALUES(17,'작은방',150000,'2021-11-20','2021-12-19','2021-11-20');
INSERT INTO SEAT VALUES(18,'작은방',150000,'2021-11-14','2021-12-13','2021-11-11');
INSERT INTO SEAT VALUES(19,'작은방',150000,NULL,NULL,NULL);
INSERT INTO SEAT VALUES(20,'작은방',150000,'2021-11-19','2021-12-18','2021-11-19');
INSERT INTO SEAT VALUES(21,'작은방',150000,NULL,NULL,NULL);
INSERT INTO SEAT VALUES(22,'작은방',150000,'2021-11-02','2021-12-01','2021-11-02');
INSERT INTO SEAT VALUES(23,'작은방',150000,'2021-11-16','2021-12-15','2021-11-13');
INSERT INTO SEAT VALUES(24,'작은방',150000,NULL,NULL,NULL);
INSERT INTO SEAT VALUES(25,'작은방',150000,'2021-11-28','2021-12-27','2021-11-28');


-- Room 스터디룸 데이터 생성 
INSERT INTO ROOM VALUES (1 ,2 ,NULL,NULL,NULL);
INSERT INTO ROOM VALUES (2 ,4 ,NULL,NULL,NULL);
INSERT INTO ROOM VALUES (3 ,6 ,NULL,NULL,NULL);

-- DOOR 출입 번호 데이터 생성
INSERT INTO DOOR VALUES(001,'2021-11-26 14:32:00','2021-11-26 19:45:00');
INSERT INTO DOOR VALUES(002,'2021-11-26 08:06:00','2021-11-26 22:01:00');
INSERT INTO DOOR VALUES(003,'2021-11-26 12:03:00','2021-11-26 12:03:00');
INSERT INTO DOOR VALUES(004,NULL,NULL);
INSERT INTO DOOR VALUES(005,NULL,NULL);
INSERT INTO DOOR VALUES(006,'2021-11-26 13:42:00','2021-11-26 20:08:00');
INSERT INTO DOOR VALUES(007,'2021-11-24 18:22:00','2021-11-25 01:04:00');
INSERT INTO DOOR VALUES(008,'2021-11-26 09:08:00','2021-11-26 17:03:00');
INSERT INTO DOOR VALUES(009,'2021-11-26 14:33:00','2021-11-26 20:43:00');
INSERT INTO DOOR VALUES(010,'2021-11-25 17:36:00','2021-11-25 18:55:00');
INSERT INTO DOOR VALUES(011,'2021-11-26 12:39:00','2021-11-26 18:21:00');
INSERT INTO DOOR VALUES(012,'2021-11-26 11:23:00','2021-11-26 14:36:00');
INSERT INTO DOOR VALUES(013,'2021-11-12 19:16:00','2021-11-12 20:33:00');
INSERT INTO DOOR VALUES(014,'2021-11-23 18:21:00','2021-11-23 23:32:00');
INSERT INTO DOOR VALUES(015,'2021-11-26 09:54:00','2021-11-26 22:43:00');
INSERT INTO DOOR VALUES(016,'2021-11-26 13:01:00','2021-11-26 15:34:00');
INSERT INTO DOOR VALUES(017,'2021-11-24 17:49:00','2021-11-24 23:41:00');
INSERT INTO DOOR VALUES(018,'2021-11-26 16:55:00','2021-11-26 22:17:00');
INSERT INTO DOOR VALUES(019,NULL,NULL);
INSERT INTO DOOR VALUES(020,'2021-11-26 13:06:00','2021-11-27 00:01:00');
INSERT INTO DOOR VALUES(021,NULL,NULL);
INSERT INTO DOOR VALUES(022,'2021-11-26 08:02:00','2021-11-26 20:07:00');
INSERT INTO DOOR VALUES(023,'2021-11-26 14:11:00','2021-11-27 01:32:00');
INSERT INTO DOOR VALUES(024,NULL,NULL);
INSERT INTO DOOR VALUES(025,'2021-11-26 09:21:00','2021-11-26 18:33:00'); 

-- Member 데이터 생성 회원 20명 정보 등록

INSERT INTO MEMBER VALUES( 42393926,'조우준','능곡동',20,16,NULL); 
INSERT INTO MEMBER VALUES( 48111384,'김주안','매화동',20,18,NULL);
INSERT INTO MEMBER VALUES( 23501121,'안지훈','정왕1동',20,6,NULL); 
INSERT INTO MEMBER VALUES( 71852976,'조효진','과림동',20,14,NULL); 
INSERT INTO MEMBER VALUES( 46851654,'안정민','정왕2동',20,2,NULL); 
INSERT INTO MEMBER VALUES( 87651346,'권영혁','배곧1동',20,25,NULL); 
INSERT INTO MEMBER VALUES( 16588895,'김민혁','대야동',20,12,NULL); 
INSERT INTO MEMBER VALUES( 98895524,'이다운','정왕3동',20,8,NULL); 
INSERT INTO MEMBER VALUES( 51509577,'한유리','월곶동',20,20,NULL); 
INSERT INTO MEMBER VALUES( 79986397,'남희지','은행동',20,7,NULL); 
INSERT INTO MEMBER VALUES( 79885132,'김혜리','장곡동',20,23,NULL); 
INSERT INTO MEMBER VALUES( 55165468,'박시연','연성동',20,13,NULL); 
INSERT INTO MEMBER VALUES( 15548874,'이원준','신천동',20,9,NULL); 
INSERT INTO MEMBER VALUES( 63440378,'고수환','정왕1동',20,22,NULL); 
INSERT INTO MEMBER VALUES( 65489362,'유상아','배곧2동',20,10,NULL); 
INSERT INTO MEMBER VALUES( 66322514,'김수연','정왕3동',20,3,NULL); membermember
INSERT INTO MEMBER VALUES( 78955465,'정준일','배곧3동',20,17,NULL); 
INSERT INTO MEMBER VALUES( 40476703,'김지현','능곡동',20,11,NULL); 
INSERT INTO MEMBER VALUES( 50069582,'김정훈','과림동',20,1,NULL); 
INSERT INTO MEMBER VALUES( 87826456,'박연준','대야동',20,15,NULL); 